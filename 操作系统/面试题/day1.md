# Day01

## 进程与线程的区别

根本区别：进程是操作系统资源分配的基本单位，而线程是任务调度和执行的基本单位

在开销方面：每个进程都有独立的代码和数据空间（程序上下文），程序之间的切换会有较大的开销；线程可以看做轻量级的进程，同一类线程共享代码和数据空间，每个线程都有自己独立的运行栈和程序计数器（PC），线程之间切换的开销小。

所处环境：在操作系统中能同时运行多个进程（程序）；而在同一个进程（程序）中有多个线程同时执行（通过CPU调度，在每个时间片中只有一个线程执行）

内存分配方面：系统在运行的时候会为每个进程分配不同的内存空间；而对线程而言，除了CPU外，系统不会为线程分配内存（线程所使用的资源来自其所属进程的资源），线程组之间只能共享资源。

包含关系：没有线程的进程可以看做是单线程的，如果一个进程内有多个线程，则执行过程不是一条线的，而是多条线（线程）共同完成的；线程是进程的一部分，所以线程也被称为轻权进程或者轻量级进程。

## Socket在本机和网络的通信区别

## 多线程和多进程的区别及其应用场景

**多进程优点：**

1、每个进程互相独立，不影响主程序的稳定性，子进程崩溃没关系；

2、通过增加CPU，就可以容易扩充性能；

3、可以尽量减少线程加锁/解锁的影响，极大提高性能，就算是线程运行的模块算法效率低也没关系；

4、每个子进程都有2GB[地址空间](https://so.csdn.net/so/search?q=地址空间&spm=1001.2101.3001.7020)和相关资源，总体能够达到的性能上限非常大。

**多进程缺点：**

1、逻辑控制复杂，需要和主程序交互；

2、需要跨进程边界，如果有[大数据](https://so.csdn.net/so/search?q=大数据&spm=1001.2101.3001.7020)量传送，就不太好，适合小数据量传送、密集运算 多进程调度开销比较大；

3、最好是多进程和[多线程](https://so.csdn.net/so/search?q=多线程&spm=1001.2101.3001.7020)结合，即根据实际的需要，每个CPU开启一个子进程，这个子进程开启多线程可以为若干同类型的数据进行处理。当然你也可以利用多线程+多CPU+轮询方式来解决问题……

4、方法和手段是多样的，关键是自己看起来实现方便有能够满足要求，代价也合适。

## 多线程：

**多线程的优点：**

1、无需跨进程边界；

2、程序逻辑和控制方式简单；

3、所有线程可以直接共享内存和变量等；

4、线程方式消耗的总资源比进程方式好。

**多线程缺点：**

1、每个线程与主程序共用地址空间，受限于2GB地址空间；

2、线程之间的同步和加锁控制比较麻烦；

3、一个线程的崩溃可能影响到整个程序的稳定性；

4、到达一定的线程数程度后，即使再增加CPU也无法提高性能，例如Windows Server 2003，大约是1500个左右的线程数就快到极限了（线程堆栈设定为1M），如果设定线程堆栈为2M，还达不到1500个线程总数；
**

## 适用场景

https://blog.csdn.net/yu876876/article/details/82810178

1. 频繁修改：需要频繁创建和销毁的优先使用多线程
2. 计算量：需要大量计算的优先使用多线程 因为需要消耗大量CPU资源且切换频繁，所以多线程好一点
3. 相关性：任务间相关性比较强的用多线程，相关性比较弱的用多进程。因为线程之间的数据共享和同步比较简单。
4. 多分布：可能要扩展到多机分布的用多进程，多核分布的用多线程。
   但是实际中更常见的是进程加线程的结合方式，并不是非此即彼的

